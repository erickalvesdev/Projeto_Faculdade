CREATE DATABASE FACULDADE
	ON PRIMARY (
	NAME = TESTE, FILENAME = 'C:\SQL\FACULDADE,mdf', 
	SIZE = 6MB, MAXSIZE = 10MB,
	FILEGROWTH = 10%
	)

USE FACULDADE

--CRIAR TABELA PROFESSOR
CREATE TABLE PROFESSOR(
ID INT PRIMARY KEY IDENTITY,
NOME VARCHAR(200) NOT NULL
)

--CRIAR TABELA CURSO
CREATE TABLE CURSO(
ID INT PRIMARY KEY IDENTITY,
ID_PROFESSOR INT,
NOME VARCHAR(200) NOT NULL,
FOREIGN KEY (ID_PROFESSOR) REFERENCES PROFESSOR(ID)
)

--CRIAR TABELA ALUNO
CREATE TABLE ALUNO(
ID INT PRIMARY KEY IDENTITY,
ID_CURSO INT,
NOME VARCHAR(30) NOT NULL,
SOBRENOME VARCHAR(100) NOT NULL,
NOME_COMPLETO VARCHAR(100), 
DATA_NASC DATE NOT NULL,
IDADE INT
FOREIGN KEY (ID_CURSO) REFERENCES CURSO(ID)
)

--CRIAR TABELA MATRICULA
CREATE TABLE MATRICULA(
ID INT PRIMARY KEY IDENTITY,
ID_ALUNO INT,
ID_CURSO INT,
DATA_MATRICULA DATE NOT NULL,
NUMERO_ALUNO INT
)

--CRIAR PROCEDURE DE INSERT PARA TABELA PROFESSOR
CREATE PROC SP_INSERT_PROFESSOR(
	@NOME VARCHAR(200)
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_INSERT_PROFESSOR.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_INSERT_PROFESSOR] (@NOME)
*/
	BEGIN
		INSERT INTO PROFESSOR(NOME)
			VALUES	('ANTONIO MARCOS'),
					('JOSÉ MARIA'),
					('MARIA ANTONIETA'),
					('JOAO PAULO'),
					('JOAO VICTOR'),
					('MARIA JOSE'),
					('MARCOS PAULO'),
					('PALOMA LAURENTINA'),
					('ALEXANDRE GOUVEIA'),
					('PAULO ANDRE')
	END
GO

--CRIAR PROCEDURE DE INSERT PARA TABELA CURSO
CREATE PROC SP_INSERT_CURSO(
	@ID_PROFESSOR INT,
	@NOME VARCHAR(200)
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_INSERT_CURSO.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_INSERT_CURSO] (@ID_PROFESSOR, @NOME)
*/
	BEGIN
		INSERT INTO CURSO(ID_PROFESSOR, NOME)
			VALUES	(1, 'MATEMATICA'),
					(2, 'GEOGRAFIA'),
					(3, 'PORTUGUES'),
					(4, 'HISTORIA'),
					(5, 'INGLES'),
					(6, 'ESPANHOL'),
					(7, 'INFORMATICA'),
					(8, 'PEDAGOGIA'),
					(9, 'HISTORIA DE INGÁ'),
					(10, 'CIENCIA DA COMPUTACAO')
	END
GO

--CRIAR PROCEDURE DE INSERT PARA TABELA ALUNO
CREATE PROC SP_INSERT_ALUNO(
	@ID_CURSO INT,
	@NOME VARCHAR(30),
	@SOBRENOME VARCHAR(100),
	@DATA_NASC DATE
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_INSERT_CURSO.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_INSERT_ALUNO] (@ID_CURSO, @NOME, @SOBRENOME, @DATA_NASC)
*/
	BEGIN
		INSERT INTO ALUNO(ID_CURSO, NOME, SOBRENOME, DATA_NASC)
			VALUES	(10, 'ERICK', 'ALVES', '1987-04-16'),
					(7, 'JOAO', 'EMANUEL', '2006-03-05'),
					(4, 'ALCYMARIO', 'GABRIEL', '2003-05-20'),
					(3, 'HENRIQUE', 'SANTOS', '2000-08-05'),
					(6, 'JULIA', 'EVELIN', '2005-04-21'),
					(8, 'NATANAEL', 'ARAUJO', '1999-09-02'),
					(5, 'LUCAS', 'MELO', '2002-06-26'),
					(2, 'EMANUEL', 'BACALHAU', '2007-01-10'),
					(9, 'WANESSA', 'CANDIDO', '2001-03-27'),
					(1, 'JUAN', 'PABLO', '2004-02-17')
	END
GO

--CRIAR PROCEDURE DE INSERT PARA TABELA MATRICULA
CREATE PROC SP_INSERT_MATRICULA(
	@ID_ALUNO INT,
	@ID_CURSO INT,
	@DATA_MATRICULA DATE
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_INSERT_CURSO.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_INSERT_ALUNO] (@ID_ALUNO, @ID_CURSO, @DATA_MATRICULA)
*/
	BEGIN
		INSERT INTO MATRICULA(ID_ALUNO, ID_CURSO, DATA_MATRICULA)
			VALUES	(1, 10, '2023-02-01'),
					(2, 7, '2023-02-01'),
					(3, 4, '2023-02-01'),
					(4, 3, '2023-02-01'),
					(5, 6, '2023-02-01'),
					(6, 8, '2023-06-01'),
					(7, 5, '2023-06-01'),
					(8, 2, '2023-06-01'),
					(9, 9, '2023-09-01'),
					(10, 1, '2023-09-01')
	END
GO

--CRIAR PROCEDURE PARA ATUALIZAR A TABELA PROFESSOR
CREATE PROC SP_UPDATE_PROFESSOR(
	@ID_PROFESSOR INT,
	@NOME VARCHAR(200)
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_UPDATE_PROFESSOR.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_UPDATE_PROFESSOR] 1, 'ANTONIO MARCOS ARAUJO'
*/
	BEGIN
		IF @ID_PROFESSOR IS NOT NULL

		UPDATE PROFESSOR
			SET NOME = @NOME
		WHERE ID = @ID_PROFESSOR

	END
GO

SELECT * FROM PROFESSOR

--CRIAR PROCEDURE PARA ATUALIZAR A TABELA CURSO
CREATE PROC SP_UPDATE_CURSO(
	@ID_CURSO INT,
	@ID_PROFESSOR INT,
	@NOME VARCHAR(200)
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_UPDATE_CURSO.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_UPDATE_CURSO] (@ID_CURSO, @ID_PROFESSOR)
*/
	BEGIN
		IF @ID_PROFESSOR IS NOT NULL 

		UPDATE CURSO
			SET ID_PROFESSOR = @ID_PROFESSOR
		WHERE ID = @ID_CURSO

	END
GO

--CRIAR PROCEDURE PARA ATUALIZAR A TABELA ALUNO
CREATE PROC SP_UPDATE_ALUNO(
	@ID_ALUNO INT,
	@ID_CURSO INT
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_UPDATE_ALUNO.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_UPDATE_ALUNO] 1, 4
*/
	BEGIN
		IF @ID_ALUNO IS NOT NULL

		UPDATE ALUNO
			SET ID_CURSO = @ID_CURSO
		WHERE ID = @ID_ALUNO

	END
GO

--CRIAR PROCEDURE PARA ATUALIZAR A TABELA MATRICULA
CREATE PROC SP_UPDATE_MATRICULA(
	@ID_MATRICULA INT,
	@ID_ALUNO INT,
	@ID_CURSO INT,
	@DATA_MATRICULA DATE
)
AS
/*
DOCUMENTAÇÃO
ARQUIVO FONTE.....: SP_UPDATE_MATRICULA.SQL
OBJETIVO..........: FAZER BUSCA NA TABELA PLANTA
AUTOR.............: ERICK ALVES
DATA..............: 12/01/2024
EX................: EXEC [dbo].[SP_UPDATE_MATRICULA] 1, 1, 8, '2023-06-02' 
*/
	BEGIN
		IF @ID_MATRICULA IS NOT NULL AND @ID_ALUNO IS NOT NULL

		UPDATE MATRICULA
			SET ID_CURSO = @ID_CURSO, DATA_MATRICULA = @DATA_MATRICULA
		WHERE ID = @ID_MATRICULA

	END
GO

SELECT * FROM MATRICULA

